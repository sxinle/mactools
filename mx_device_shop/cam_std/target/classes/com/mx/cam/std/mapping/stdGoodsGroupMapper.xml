<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mx.cam.std.dao.StdGoodsGroupDao">

	<!-- 查询商品是否被组合商品使用 -->
    <select id="getGoodsGroupByGoodsIdCount" resultType="int">
        select count(*)
        from std_goods_group
        where goods_id in 
 		<foreach  item="item" collection="array" open="(" separator=","  close=")">
			#{item}
		</foreach>
        and goods_pid not in 
 		<foreach  item="item" collection="array" open="(" separator=","  close=")">
			#{item}
		</foreach>
    </select>
    
    <!-- 删除组合商品关系数据 -->
    <delete id="deleteGoodsGroupByGoodsPid">
		delete from std_goods_group
		where goods_pid in 
 		<foreach  item="item" collection="array" open="(" separator=","  close=")">
			#{item}
		</foreach>
	</delete>
    
    <!-- 查询组合商品的子商品信息 -->
    <select id="getGoodsGroupManage" resultType="com.mx.cam.std.model.GoodsGroup">
        select g.*
        from std_goods_group r,std_goods g
        where g.goods_id = r.goods_id
        and r.goods_pid = #{goods_pid} 
    </select>
    
    <!-- 添加组合商品信息 -->
    <insert id="insertGoodsGroup">
    insert into std_goods_group(
    		goods_pid,
    		goods_id
    	)
    	values(
    		#{goods_pid},
    		#{goods_id}
    	)
    </insert>

</mapper>
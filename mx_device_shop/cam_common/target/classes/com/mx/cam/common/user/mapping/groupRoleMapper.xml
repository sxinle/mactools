<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mx.cam.common.user.dao.GroupRoleDao">

	<delete id="deleteGroupRoleByRole">
		DELETE
		FROM
			tr_group_role
		WHERE
			group_id IN (
				SELECT
					group_id
				FROM
					te_group
				WHERE
					group_id = #{group_id})
	</delete>

	<delete id="deleteGroupRoleByGroup">
		DELETE FROM tr_group_role
		WHERE group_id IN
		<foreach item="item" collection="array" open="(" separator="," close=")">
			#{item}
		</foreach>
	</delete>


	<select id="getRoleByGroup" resultType="com.mx.cam.common.user.model.Role">
		SELECT role_id AS id 
			FROM    tr_group_role
		WHERE group_id = #{id}
	</select>

	<insert id="saveGroupRole">
		INSERT INTO tr_group_role(
			group_id,
			role_id
		)
		VALUES(
			#{group_id},
			#{role_id}
		)
	</insert>

</mapper>

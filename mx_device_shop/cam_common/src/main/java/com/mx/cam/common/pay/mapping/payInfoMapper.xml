<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mx.cam.common.pay.dao.PayInfoDao">
    
    <select id="getWechatInfo" resultType="com.mx.cam.common.pay.model.WechatInfo">
		select * from te_wechat_payment_account
		where 1=1
		<if test = "product_id != null and product_id != ''">
           and product_id = #{product_id}
        </if>
    </select>

	<select id="checkWechatProductSame" resultType="int">
        SELECT count(*) FROM te_wechat_payment_account 
        where product_id = #{product_id}
        <if test = "id != null and id != ''">
           and product_id != #{id}
        </if>
    </select>
    
    <insert id="insertWechatInfo">
    	insert into te_wechat_payment_account(
    		product_id,
			appid,
			mch_id,
			device_info,
			attach,
			spbill_create_ip,
			goods_tag,
			notify_url,
			trade_type,
			sign_key
    	)
    	values(
    		#{product_id},
			#{appid},
			#{mch_id},
			#{device_info},
			#{attach},
			#{spbill_create_ip},
			#{goods_tag},
			#{notify_url},
			#{trade_type},
			#{sign_key}
    	)
    </insert>
    
    <update id="updateWechatInfo">
    	update te_wechat_payment_account set 
    	product_id = #{product_id},
		appid = #{appid},
		mch_id = #{mch_id},
		device_info = #{device_info},
		attach = #{attach},
		spbill_create_ip = #{spbill_create_ip},
		goods_tag = #{goods_tag},
		notify_url = #{notify_url},
		trade_type = #{trade_type},
		sign_key = #{sign_key}
    	where product_id = #{id}
    </update> 
    
    <delete id="deleteWechatInfo">
		delete from te_wechat_payment_account
		where product_id in 
 		<foreach  item="item" collection="array" open="(" separator=","  close=")">
			#{item}
		</foreach>
	</delete>
    
    
    
    
    <select id="getAlipayInfo" resultType="com.mx.cam.common.pay.model.AlipayInfo">
		select * from te_alipay_payment_account
		<if test = "product_id != null and product_id != ''">
           and product_id = #{product_id}
        </if>
    </select>
    
    <select id="checkAlipayProductSame" resultType="int">
        SELECT count(*) FROM te_alipay_payment_account 
        where product_id = #{product_id}
        <if test = "id != null and id != ''">
           and product_id != #{id}
        </if>
    </select>
    
    <insert id="insertAlipayInfo">
    	insert into te_alipay_payment_account(
    		product_id,
			app_id,
			alipay_public_key,
			sign_charset,
			charset,
			sign_type,
			partner,
			private_key,
			public_key,
			alipay_gateway,
			grant_type,
			notify_url
    	)
    	values(
    		#{product_id},
			#{app_id},
			#{alipay_public_key},
			#{sign_charset},
			#{charset},
			#{sign_type},
			#{partner},
			#{private_key},
			#{public_key},
			#{alipay_gateway},
			#{grant_type},
			#{notify_url}
    	)
    </insert>
    
    <update id="updateAlipayInfo">
    	update te_alipay_payment_account set 
    	product_id = #{product_id},
		app_id = #{app_id},
		alipay_public_key = #{alipay_public_key},
		sign_charset = #{sign_charset},
		charset = #{charset},
		sign_type = #{sign_type},
		partner = #{partner},
		private_key = #{private_key},
		public_key = #{public_key},
		alipay_gateway = #{alipay_gateway},
		grant_type = #{grant_type},
		notify_url = #{notify_url}
    	where product_id = #{id}
    </update> 
    
    <delete id="deleteAlipayInfo">
		delete from te_alipay_payment_account
		where product_id in 
 		<foreach  item="item" collection="array" open="(" separator=","  close=")">
			#{item}
		</foreach>
	</delete>
    
</mapper>
